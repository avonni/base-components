<template>
    <template if:true={isClassic}>
        <span class={avatarGroupClass}>
            <c-avatar
                alternative-text={primaryItem.alternativeText}
                fallback-icon-name={primaryItem.fallbackIconName}
                initials={primaryItem.initials}
                src={primaryItem.src}
                variant="circle"
                hide-avatar-details="true"
                data-item-id="0"
                data-type="show"
                class="slds-avatar-grouped slds-avatar-grouped__primary"
                onclick={handleAvatarclick}
                tabindex="0"
            ></c-avatar>
            <c-avatar
                alternative-text={secondaryItem.alternativeText}
                fallback-icon-name={secondaryItem.fallbackIconName}
                initials={secondaryItem.initials}
                src={secondaryItem.src}
                variant="circle"
                hide-avatar-details="true"
                data-item-id="1"
                data-type="show"
                class="slds-avatar-grouped slds-avatar-grouped__secondary"
                onclick={handleAvatarclick}
                tabindex="0"
                size={size}
            ></c-avatar>
        </span>
    </template>
    <template if:false={isClassic}>
        <template for:each={listItems} for:item="item" for:index="index">
            <template if:false={item.showMore}>
                <template if:true={item.key}>
                    <c-avatar
                        key={item.key}
                        alternative-text={item.alternativeText}
                        fallback-icon-name={item.fallbackIconName}
                        initials={item.initials}
                        src={item.src}
                        variant="circle"
                        hide-avatar-details="true"
                        data-item-id={index}
                        data-type="show"
                        class={avatarInlineClass}
                        onclick={handleAvatarclick}
                        onblur={handleBlur}
                        tabindex="0"
                        size={size}
                    ></c-avatar>
                </template>
            </template>
            <template if:true={item.showMore}>
                <div
                    class="slds-dropdown-trigger slds-dropdown-trigger_click slds-is-open"
                    key={item.key}
                >
                    <span
                        class={avatarInlinePlusClass}
                        onclick={handleAvatarclick}
                        onblur={handleBlur}
                        tabindex="0"
                    >
                        <abbr
                            if:true={item.initials}
                            class="slds-avatar__initials slds-avatar-grouped__initials"
                            data-item-id={index}
                            data-type="show"
                            >{item.initials}
                        </abbr>
                    </span>
                    <template if:true={showPopover}>
                        <div
                            class="slds-dropdown slds-dropdown_left"
                            onmouseenter={cancelBlur}
                            onmouseleave={allowBlur}
                        >
                            <template
                                for:each={listHiddenItems}
                                for:item="item"
                                for:index="index"
                            >
                                <div
                                    key={item.key}
                                    class="avonni-hidden-avatar-container"
                                    onclick={handleAvatarclick}
                                    data-item-id={index}
                                    data-type="hidden"
                                >
                                    <c-avatar
                                        alternative-text={item.alternativeText}
                                        fallback-icon-name={item.fallbackIconName}
                                        initials={item.initials}
                                        src={item.src}
                                        variant="circle"
                                        hide-avatar-details="true"
                                        size={size}
                                        data-item-id={index}
                                        data-type="hidden"
                                        class={avatarInlineClass}
                                        onclick={handleAvatarclick}
                                        tabindex="0"
                                    ></c-avatar>
                                    <p
                                        onclick={handleAvatarclick}
                                        data-item-id={index}
                                        data-type="hidden"
                                    >
                                        {item.alternativeText}
                                    </p>
                                </div>
                            </template>
                        </div>
                    </template>
                </div>
            </template>
        </template>
    </template>
</template>
