<template>
    <div
        class={computedOuterClass}
        role="group"
        aria-labelledby="picklist-group-label"
    >
        <template if:false={isLabelHidden}>
            <span
                id="picklist-group-label"
                class="slds-form-element__label slds-form-element__legend"
                ><abbr if:true={required} title="required" class="slds-required"
                    >*</abbr
                >{label}</span
            >
        </template>
        <lightning-helptext
            if:true={fieldLevelHelp}
            content={fieldLevelHelp}
        ></lightning-helptext>
        <div class="slds-form-element__control">
            <div class="slds-dueling-list">
                <div
                    class="slds-assistive-text"
                    id="drag-live-region"
                    aria-live="assertive"
                ></div>
                <div class="slds-assistive-text" id="option-drag-label">
                    Press space bar when on an item, to move it within the list.
                    Cmd/Ctrl plus left and right arrow keys, to move items
                    between lists.
                </div>
                <div class="slds-dueling-list__column">
                    <span class="slds-form-element__label">{sourceLabel}</span>
                    <div class={computedInnerClass} style={computedHeightSize}>
                        <template if:true={searchEngine}>
                            <lightning-input
                                name="enter-search"
                                label="Filter"
                                placeholder="Type to filter list..."
                                type="search"
                                class="slds-p-around_small"
                                variant="label-hidden"
                            ></lightning-input>
                        </template>
                        <ul
                            aria-describedby="option-drag-label"
                            aria-labelledby="label-105"
                            aria-multiselectable="true"
                            class="slds-listbox slds-listbox_vertical"
                            role="listbox"
                        >
                            <template for:each={_notSelected} for:item="option">
                                <c-primitive-option
                                    key={option.value}
                                    label={option.label}
                                    value={option.value}
                                    avatar-fallback-icon-name={option.avatarFallbackIconName}
                                    avatar-src={option.avatarSrc}
                                    avatar-initials={option.avatarInitials}
                                    avatar-variant={option.avatarVariant}
                                    avatar-primary-text={option.avatarPrimaryText}
                                    avatar-secondary-text={option.avatarSecondaryText}
                                    required-options={requiredOptions}
                                ></c-primitive-option>
                            </template>
                        </ul>
                    </div>
                    <template if:true={showActivityIndicator}>
                        <lightning-spinner></lightning-spinner>
                    </template>
                </div>
                <div class="slds-dueling-list__column">
                    <button
                        class="slds-button slds-button_icon slds-button_icon-container"
                        title={addButtonLabel}
                    >
                        <svg class="slds-button__icon" aria-hidden="true">
                            <use
                                xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#right"
                            ></use>
                        </svg>
                        <span class="slds-assistive-text"
                            >{addButtonLabel}</span
                        >
                    </button>
                    <button
                        class="slds-button slds-button_icon slds-button_icon-container"
                        title={removeButtonLabel}
                    >
                        <svg class="slds-button__icon" aria-hidden="true">
                            <use
                                xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#left"
                            ></use>
                        </svg>
                        <span class="slds-assistive-text"
                            >{removeButtonLabel}</span
                        >
                    </button>
                </div>
                <div class="slds-dueling-list__column">
                    <span class="slds-form-element__label" id="label-106"
                        >{selectedLabel}</span
                    >
                    <div class={computedInnerClass} style={computedHeightSize}>
                        <ul
                            aria-describedby="option-drag-label"
                            aria-labelledby="label-106"
                            aria-multiselectable="true"
                            class="slds-listbox slds-listbox_vertical"
                            role="listbox"
                        >
                            <template for:each={_selected} for:item="option">
                                <c-primitive-option
                                    key={option.value}
                                    label={option.label}
                                    value={option.value}
                                    avatar-fallback-icon-name={option.avatarFallbackIconName}
                                    avatar-src={option.avatarSrc}
                                    avatar-initials={option.avatarInitials}
                                    avatar-variant={option.avatarVariant}
                                    avatar-primary-text={option.avatarPrimaryText}
                                    avatar-secondary-text={option.avatarSecondaryText}
                                    required-options={requiredOptions}
                                ></c-primitive-option>
                            </template>
                        </ul>
                    </div>
                </div>
                <template if:false={disableReordering}>
                    <div class="slds-dueling-list__column">
                        <button
                            class="slds-button slds-button_icon slds-button_icon-container"
                            title="Move Selection Up"
                        >
                            <svg class="slds-button__icon" aria-hidden="true">
                                <use
                                    xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#up"
                                ></use>
                            </svg>
                            <span class="slds-assistive-text"
                                >{upButtonLabel}</span
                            >
                        </button>
                        <button
                            class="slds-button slds-button_icon slds-button_icon-container"
                            title="Move Selection Down"
                        >
                            <svg class="slds-button__icon" aria-hidden="true">
                                <use
                                    xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#down"
                                ></use>
                            </svg>
                            <span class="slds-assistive-text"
                                >{downButtonLabel}</span
                            >
                        </button>
                    </div>
                </template>
            </div>
        </div>
        <span
            id="helptext"
            class="slds-text-color_destructive slds-form-element__help"
            >{_helpMessage}</span
        >
    </div>
</template>
