<template>
    <div
        class="avonni-tree_container"
        data-element-id="div-tree-wrapper"
        onaddbranch={handleAddBranch}
        onbranchaction={handleBranchAction}
        onchange={handleChange}
        onprivatemousedown={handleMouseDown}
        onprivateitemclick={handleClick}
        onprivateitemkeydown={handleKeydown}
        onprivateregisteritem={handleRegistration}
    >
        <h4 class="avonni-tree__group-header" id="treeheading">{header}</h4>

        <!-- Root item -->
        <template for:each={children} for:item="item" for:index="index">
            <c-primitive-tree-item
                key={item.key}
                aria-disabled={item.isDisabled}
                aria-expanded={item.strexpanded}
                aria-label={item.label}
                aria-level={item.level}
                aria-selected={item.selected}
                child-items={item.children}
                focused-child={item.focusedChild}
                href={item.href}
                is-disabled={item.isDisabled}
                is-expanded={item.isExpanded}
                is-read-only={readOnly}
                is-leaf={item.isLeaf}
                label={item.label}
                level={item.level}
                metatext={item.metatext}
                node-key={item.key}
                node-ref={item.nodeRef}
                nodename={item.name}
                role="treeitem"
                data-key={item.key}
            ></c-primitive-tree-item>
        </template>
    </div>

    <button
        if:false={readOnly}
        class="
            slds-button slds-button_neutral slds-button_stretch
            slds-m-top_xx-small
            slds-m-left_none
        "
        onclick={handleAddBranch}
    >
        Add item
    </button>
</template>
