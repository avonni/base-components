<template>
    <!-- Root avatar / title -->
    <div class="slds-m-bottom_medium">
        <c-media-object vertical-align="center">
            <c-avatar
                if:true={hasAvatar}
                slot="figure"
                alternative-text={label}
                fallback-icon-name={avatarFallbackIconName}
                src={avatarSrc}
                hide-avatar-details="true"
            ></c-avatar>
            <h1 class="slds-text-heading_small">
                <a if:true={href} href={href}>{label}</a>
                <span if:false={href}>{label}</span>
            </h1>
        </c-media-object>
    </div>

    <div
        if:true={actions}
        class="slds-is-relative slds-p-vertical_small avonni-relationship-graph__actions"
    >
        <template for:each={actions} for:item="action">
            <div key={action.name} class="slds-m-bottom_xx-small">
                <lightning-button
                    label={action.label}
                    icon-name={action.iconName}
                    disabled={action.disabled}
                    onclick={handleActionClick}
                    value={action.name}
                ></lightning-button>
            </div>
        </template>
    </div>

    <div class={wrapperClass}>
        <div class="avonni-relationship-graph__line"></div>

        <!-- Levels -->
        <c-primitive-relationship-graph-level
            onselect={dispatchSelectEvent}
            onactionclick={dispatchActionClickEvent}
            onheightchange={handleLevelHeightChange}
            groups={processedGroups}
            variant={variant}
            shrink-icon-name={shrinkIconName}
            expand-icon-name={expandIconName}
            group-actions={groupActions}
            group-actions-position={groupActionsPosition}
            group-theme={groupTheme}
            item-actions={itemActions}
            item-theme={itemTheme}
            hide-items-count={hideItemsCount}
        ></c-primitive-relationship-graph-level>
    </div>
</template>
