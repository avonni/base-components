<template>
    <fieldset aria-required={required}>
        <legend class={computedLegendClass}>
            <template if:true={required}>
                <abbr class="slds-required" title={i18n.required}>*</abbr>
            </template>
            {label}
        </legend>

        <div class="slds-form-element__control">
            <div class={computedButtonClass}>
                <template for:each={transformedOptions} for:item="option">
                    <span
                        class={computedCheckboxContainerClass}
                        key={option.value}
                    >
                        <input
                            type={computedInputType}
                            name={name}
                            id={option.id}
                            checked={option.isChecked}
                            value={option.value}
                            disabled={disabled}
                            onclick={handleClick}
                            onchange={handleChange}
                            onfocus={handleFocus}
                            onblur={handleBlur}
                        />

                        <label class={computedLabelClass} for={option.id}>
                            <span>
                                <template if:true={checkboxVariant}>
                                    <div> 
                                        <avonni-media-object vertical-align="center" size="small">
                                            <span slot="figure" class={checkboxShapeClass}></span>
                                            <div>
                                                <lightning-icon if:true={option.isIconTop} class="slds-align_absolute-center slds-m-right_x-small block" icon-name={option.iconName} size="x-small"></lightning-icon>
                                                <lightning-icon if:true={option.isIconLeft} class="slds-m-right_x-small" icon-name={option.iconName} size="x-small"></lightning-icon>
                                                <div class="slds-form-element__label">{option.label}</div>
                                                <lightning-icon if:true={option.isIconRight} icon-name={option.iconName} size="x-small"></lightning-icon>
                                                <lightning-icon if:true={option.isIconBottom} class="slds-align_absolute-center slds-m-right_x-small block" icon-name={option.iconName} size="x-small"></lightning-icon>
                                            </div>
                                          </avonni-media-object>
                                    </div>
                                </template>
    
                                <template if:false={checkboxVariant} >
                                    <div class="slds-p-horizontal_small">
                                        <lightning-icon if:true={option.isIconTop} class="slds-align_absolute-center slds-m-top_x-small" icon-name={option.iconName} size="x-small"></lightning-icon>
                                        <lightning-icon if:true={option.isIconLeft} class="slds-m-right_x-small" icon-name={option.iconName} size="x-small"></lightning-icon>
                                        <span class={option.labelButtonClass}>{option.label}</span>
                                        <lightning-icon if:true={option.isIconRight} class="slds-m-left_x-small" icon-name={option.iconName} size="x-small"></lightning-icon>
                                        <lightning-icon if:true={option.isIconBottom} class="slds-align_absolute-center slds-m-bottom_x-small" icon-name={option.iconName} size="x-small"></lightning-icon>
                                    </div>
                                </template>
    
                            </span>
                        </label>
                    </span>
                </template>
            </div>
        </div>
        <template if:true={_helpMessage}>
            <div id="helptext" data-helptext class="slds-form-element__help">
                {_helpMessage}
            </div>
        </template>
    </fieldset>
</template>
