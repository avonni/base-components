<!--
/**
 * BSD 3-Clause License
 *
 * Copyright (c) 2021, Avonni Labs, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * - Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright notice,
 *   this list of conditions and the following disclaimer in the documentation
 *   and/or other materials provided with the distribution.
 *
 * - Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
-->

<template>
    <div if:true={hasTabs} class="slds-tabs_default">
        <ul class="slds-tabs_default__nav" role="tablist">
            <template if:true={showTabs} for:each={visibleTabs} for:item="tab">
                <li
                    class={tab.classes}
                    role="presentation"
                    key={tab.id}
                    onkeydown={handleVisibleTabKeyDown}
                >
                    <a
                        title={tab.title}
                        class="slds-tabs_default__link"
                        href="javascript:void(0);"
                        role="tab"
                        tabindex={tab.tabIndex}
                        aria-selected={tab.ariaSelected}
                        data-element-id="a-tab-link"
                        onclick={handleTabClick}
                        onblur={triggerBlur}
                    >
                        {tab.title}
                    </a>
                </li>
            </template>
            <template if:true={showOverflowArrow}>
                <li
                    class="
                        slds-tabs_default__item
                        slds-tabs_default__overflow-button
                    "
                    title="More icons"
                    role="presentation"
                >
                    <div
                        class="
                            slds-dropdown-trigger slds-dropdown-trigger_click
                            slds-is-open
                        "
                    >
                        <button
                            class="slds-button"
                            aria-haspopup="true"
                            aria-expanded={showHiddenTabsDropdown}
                            type="button"
                            data-element-id="button-hidden-tabs"
                            onfocus={handleDropDownButtonFocus}
                            onblur={handleDropDownButtonBlur}
                            onclick={handleShowHiddenTabsClick}
                        >
                            <span class="slds-icon_container">
                                <lightning-icon
                                    icon-name="utility:chevrondown"
                                    size="x-small"
                                ></lightning-icon>
                            </span>
                        </button>

                        <!-- Hidden tabs dropdown -->
                        <div
                            if:true={showHiddenTabsDropdown}
                            onfocusin={handleDropDownFocusIn}
                            onfocusout={handleDropDownFocusOut}
                        >
                            <div class="slds-dropdown slds-dropdown_right">
                                <ul
                                    class="
                                        slds-dropdown__list
                                        slds-dropdown_length-with-icon-10
                                    "
                                    role="menu"
                                >
                                    <template
                                        for:each={hiddenTabs}
                                        for:item="hiddenTab"
                                    >
                                        <li
                                            class="slds-dropdown__item"
                                            role="presentation"
                                            key={hiddenTab}
                                            onkeydown={handleDropDownItemKeyDown}
                                        >
                                            <a
                                                href="javascript:void(0);"
                                                role="menuitem"
                                                tabindex="-1"
                                                title={hiddenTab}
                                                data-element-id="a-hidden-tab"
                                                onmousedown={changeLastCategory}
                                            >
                                                <span
                                                    class="slds-truncate"
                                                    title={hiddenTab}
                                                    >{hiddenTab}</span
                                                >
                                            </a>
                                        </li>
                                    </template>
                                </ul>
                            </div>
                        </div>
                    </div>
                </li>
            </template>
        </ul>
    </div>
</template>
