<template>
    <div class="slds-card">
        <!-- Navigation -->
        <div class="slds-p-around_medium slds-border_bottom">
            <div class="slds-grid">
                <lightning-progress-indicator
                    class="slds-col"
                    current-step={currentStep}
                    type="path"
                >
                    <template for:each={steps} for:item="step">
                        <lightning-progress-step
                            key={step.name}
                            label={step.label}
                            value={step.name}
                            onclick={handlePathStepClick}
                        ></lightning-progress-step>
                    </template>
                </lightning-progress-indicator>
                <lightning-button
                    if:false={hidePathUpdateButton}
                    class="path-update-button slds-m-left_xx-small"
                    label={pathUpdateButtonLabel}
                    variant="brand"
                    icon-name={pathUpdateButtonIconName}
                    icon-position={pathUpdateButtonIconPosition}
                    disabled={disabled}
                    onclick={next}
                ></lightning-button>
            </div>
        </div>

        <!-- Current Step -->
        <div class="slds-grid slds-card__body slds-card__body_inner slds-wrap">
            <!-- Key fields -->
            <div class="slds-p-right_medium slds-col">
                <div
                    class="slds-grid slds-grid_vertical-align-center slds-border_bottom slds-m-bottom_x-small"
                >
                    <div
                        class="slds-col slds-p-right_small slds-p-vertical_x-small slds-has-flexi-truncate"
                    >
                        <div class="slds-truncate slds-text-title_caps">
                            {keyFieldsLabel}
                        </div>
                    </div>
                    <template
                        for:each={computedCurrentStep.actions}
                        for:item="action"
                    >
                        <lightning-button
                            class="slds-p-horizontal_x-small"
                            key={action.name}
                            label={action.label}
                            name={action.name}
                            icon-name={action.iconName}
                            disabled={action.disabled}
                            variant="base"
                            data-step-name={computedCurrentStep.name}
                            onclick={handleActionClick}
                        ></lightning-button>
                    </template>
                </div>
                <template
                    for:each={computedCurrentStep.keyFields}
                    for:item="field"
                >
                    <div
                        key={field.value}
                        class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent slds-p-horizontal_none slds-m-bottom_small"
                    >
                        <span class="slds-form-element__label"
                            >{field.label}</span
                        >
                        <div class="slds-form-element__control">
                            <div class="slds-form-element__static">
                                {field.value}
                            </div>
                        </div>
                    </div>
                </template>
            </div>

            <!-- Guidance -->
            <div
                if:true={computedCurrentStep.guidance}
                class="slds-col slds-p-left_medium slds-size_2-of-2 slds-medium-size_1-of-2"
            >
                <div
                    class="slds-truncate slds-text-title_caps slds-p-vertical_x-small slds-border_bottom slds-m-bottom_small"
                >
                    {guidanceLabel}
                </div>
                <div>{computedCurrentStep.guidance}</div>
            </div>
        </div>
    </div>
</template>
