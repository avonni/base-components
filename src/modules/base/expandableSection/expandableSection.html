<template>
    <div class={computedSectionClass} data-element-id="section">
        <div
            if:true={showHeader}
            class={computedHeaderClass}
            data-element-id="header"
        >
            <button
                class={computedTitleButtonClass}
                aria-controls="section-content"
                aria-expanded={computedAriaExpanded}
                type="button"
                data-element-id="button"
                onblur={handleBlur}
                onclick={toggleSection}
                onfocus={handleFocus}
            >
                <template if:true={collapsible}>
                    <lightning-icon
                        if:false={closed}
                        class="
                            slds-button__icon slds-button__icon_left
                            avonni-expandable-section__opened-icon
                        "
                        alternative-text={openedIconAlternativeText}
                        aria-hidden="true"
                        icon-name="utility:chevrondown"
                        size="x-small"
                        title={openedIconAlternativeText}
                        data-element-id="lightning-icon-opened"
                    ></lightning-icon>
                    <lightning-icon
                        if:true={closed}
                        class="
                            slds-button__icon slds-button__icon_left
                            avonni-expandable-section__closed-icon
                        "
                        alternative-text={closedIconAlternativeText}
                        aria-hidden="true"
                        icon-name="utility:chevronright"
                        size="x-small"
                        title={closedIconAlternativeText}
                        data-element-id="lightning-icon-closed"
                    ></lightning-icon>
                </template>
                <span
                    if:true={title}
                    class="avonni-expandable-section__title slds-truncate"
                    title={title}
                    data-element-id="title"
                >
                    {title}
                </span>
                <template if:true={showTitleSlot}>
                    <slot
                        name="title"
                        class="avonni-expandable-section__title-block"
                        data-element-id="avonni-expandable-section-title-slot"
                    ></slot>
                </template>
            </button>
        </div>
        <div
            class="avonni-expandable-section__content slds-section__content"
            aria-hidden={closed}
            id="section-content"
        >
            <slot></slot>
        </div>
    </div>
</template>
