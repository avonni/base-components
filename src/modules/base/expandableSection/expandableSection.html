<template>
    <div class={sectionClass}>
        <div if:true={showHeader} class={headerClass} data-element-id="header">
            <button
                class={titleButtonClass}
                type="button"
                aria-controls="section-content"
                aria-expanded={computedAriaExpanded}
                onclick={toggleSection}
            >
                <template if:true={collapsible}>
                    <template if:false={closed}>
                        <lightning-icon
                            icon-name="utility:chevrondown"
                            size="x-small"
                            class="
                                slds-button__icon slds-button__icon_left
                                avonni-expandable-section__opened-icon
                            "
                            aria-hidden="true"
                            data-element-id="lightning-icon-opened"
                        ></lightning-icon>
                    </template>
                    <template if:true={closed}>
                        <lightning-icon
                            icon-name="utility:chevronright"
                            size="x-small"
                            class="
                                slds-button__icon slds-button__icon_left
                                avonni-expandable-section__closed-icon
                            "
                            aria-hidden="true"
                            data-element-id="lightning-icon-closed"
                        ></lightning-icon>
                    </template>
                </template>
                <span
                    if:true={title}
                    class="avonni-expandable-section__title slds-truncate"
                    title={title}
                    data-element-id="title"
                >
                    {title}
                </span>
                <template if:true={showTitleSlot}>
                    <slot
                        name="title"
                        class="avonni-expandable-section__title-block"
                        data-element-id="avonni-expandable-section-title-slot"
                    ></slot>
                </template>
            </button>
        </div>
        <div
            class="avonni-expandable-section__content slds-section__content"
            id="section-content"
            aria-hidden={closed}
        >
            <slot></slot>
        </div>
    </div>
</template>
