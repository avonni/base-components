<template>
    <div class={wrapperClass}>
        <div class={avatarClass}>
            <img
                if:true={src}
                src={src}
                onerror={handleImageError}
                alt={alternativeText}
                title={alternativeText}
            />
            <abbr
                if:true={showInitials}
                class={computedInitialsClass}
                title={alternativeText}
                >{initials}</abbr
            >
            <lightning-icon
                size={size}
                if:true={showIcon}
                icon-name={fallbackIconName}
                alternative-text={alternativeText}
                title={alternativeText}
            ></lightning-icon>
            <!-- Presence bubble -->
            <div
                if:true={presence}
                class={presenceClass}
                title={presenceTitle}
                ria-label={presenceTitle}
            ></div>
        </div>

        <!-- Status icon -->
        <template if:true={statusComputed}>
            <lightning-icon
                class={statusComputed.class}
                size={statusComputed.iconSize}
                icon-name={statusComputed.iconName}
                alternative-text={statusComputed.title}
                title={statusComputed.title}
            ></lightning-icon>
        </template>
    </div>
</template>
