<template>
    <div class="slds-carousel">
        <lightning-layout vertical-align="center">
            <template if:false={hidePreviousNextPanelNavigation}>
                <lightning-layout-item>
                    <!-- Previous navigation -->
                    <lightning-button-icon
                        alternative-text={assistiveText.previousPanel}
                        class="slds-m-right_medium"
                        disabled={previousPanelNavigationDisabled}
                        icon-name="utility:chevronleft"
                        onclick={selectPreviousSibling}
                        size="small"
                        title={assistiveText.previousPanel}
                        variant="border-filled"
                    ></lightning-button-icon>
                </lightning-layout-item>
            </template>
            <lightning-layout-item flexibility="auto">
                <div class="slds-carousel__stage">
                    
                    <!-- Carousel pages -->
                    <div class="slds-carousel__panels" style={pageStyle}>
                        <template for:each={pageItems} for:item="page" for:index="pageIndex">
                            <div
                            class="avonni-carousel__page"
                            key={page.key}
                            aria-hidden={page.ariaHidden}
                            role="tabpanel"
                            tabindex={page.tabIndex}
                            >
                                <template for:each={page.items} for:item="item" for:index="itemIndex">
                                    <div 
                                    key={item.key}
                                    class="slds-carousel__panel"
                                    style={carouselItemStyle}
                                    >
                                        <a
                                        class="slds-carousel__panel-action slds-text-link_reset" 
                                        data-page-index={pageIndex}
                                        data-item-index={itemIndex}
                                        href={item.href}
                                        onclick={handleItemClicked}
                                        >
                                            <div class="slds-carousel__image">
                                                <img src={item.src} alt={item.imageAssistiveText} />
                                            </div>
                                            <div class="slds-carousel__content avonni-carousel__content">
                                                <h2 class="slds-carousel__content-title">{item.heading}</h2>
                                                <p>{item.description}</p>
                                                <template if:true={item.buttonLabel}>
                                                    <div class="slds-m-top_small">
                                                        <lightning-button label={item.buttonLabel} icon-name={item.buttonIconName} icon-position={item.buttonIconPosition} variant={item.buttonVariant} disabled={item.buttonDisabled}></lightning-button>
                                                    </div>
                                                </template>
                                            </div>
                                        </a>
                                    </div>
                                </template>
                            </div>
                        </template>
                    </div>

                    
                    <ul class="slds-carousel__indicators" role="tablist" onkeydown={keyDownHandler}>
                        
                        <!-- Pagination items -->
                        <template for:each={paginationItems} for:item="paginationItem" for:index="paginationIndex">
                            <li 
                            key={paginationItem.key}
                            class="slds-carousel__indicator"
                            role="presentation"
                            onclick={onPageSelect}
                            data-index={paginationIndex}
                            >
                            <a
                            id={paginationItem.id}
                            class={paginationItem.className}
                            href="javascript:void(0);"
                            role="tab"
                            tabindex={paginationItem.tabIndex}
                            aria-selected={paginationItem.ariaSelected}
                            title={paginationItem.tabTitle}
                            >
                            <span class="slds-assistive-text">{paginationItem.tabTitle}</span>
                        </a>
                    </li>
                </template>
                
            </ul>
        </div>
    </lightning-layout-item>
    <template if:false={hidePreviousNextPanelNavigation}>
        <!-- Next navigation -->
        <lightning-layout-item>
            <lightning-button-icon
                alternative-text={assistiveText.nextPanel}
                class="slds-m-left_medium"
                disabled={nextPanelNavigationDisabled}
                icon-name="utility:chevronright" 
                onclick={selectNextSibling}
                size="small"
                title={assistiveText.nextPanel}
                variant="border-filled"
            ></lightning-button-icon>
        </lightning-layout-item>
    </template>
</lightning-layout>


</div>
</template>